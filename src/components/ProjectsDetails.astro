---
import { t } from '../i18n';
import type { Project } from '../types/experience';

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;
---

{
  projects.length > 0 && (
    <details class="text-sm text-base-content/80 cursor-pointer">
      <summary>{t('projects')}</summary>
      <div class="mt-3 flex flex-col gap-3">
        {projects.map((project) => (
          <div class="">
            <h3 class="text-primary font-semibold">{t(project.name)}</h3>
            <p class="mb-2 text-sm italic">{t(project.techStack)}</p>
            <p class="mb-2">{t(project.description)}</p>
            <ul class="list-disc list-inside">
              {(() => {
                const responsibilities = t(`${project.responsibilities}`, {
                  returnObjects: true
                });
                const items = Array.isArray(responsibilities) ? responsibilities : [responsibilities];
                return items.map((p: string) => <li>{p}</li>);
              })()}
            </ul>
          </div>
        ))}
      </div>
    </details>
  )
}
